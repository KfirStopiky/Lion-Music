/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Renderer2, ElementRef, ViewChild, Input, HostListener } from '@angular/core';
import { NgxImgZoomService } from './ngx-img-zoom.service';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from './ngx-img-zoom.service';
import * as ɵngcc2 from './mouse-wheel.directive';
import * as ɵngcc3 from '@angular/common';

var _c0 = ["img"];
var _c1 = ["result"];
var _c2 = ["container"];
var _c3 = function (a0) { return { "hide": a0 }; };
var NgxImgZoomComponent = /** @class */ (function () {
    function NgxImgZoomComponent(renderer, ngxZoomService) {
        this.renderer = renderer;
        this.ngxZoomService = ngxZoomService;
        this.hide = true;
        this._triggerAnimationIn = false;
        this.notFirstTime = false;
        this.showResult = false;
        this.zoomIndex = 0;
        this.zoomMode = this.ngxZoomService.zoomMode;
        this.enableZoom = false;
        this.zoomBreakPoints = this.ngxZoomService.zoomBreakPoints;
    }
    Object.defineProperty(NgxImgZoomComponent.prototype, "imgStyle", {
        get: /**
         * @return {?}
         */
        function () {
            return this._imgStyle;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._imgStyle = val;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgxImgZoomComponent.prototype, "resultStyle", {
        get: /**
         * @return {?}
         */
        function () {
            return this._resultStyle;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._resultStyle = val;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgxImgZoomComponent.prototype, "lensStyle", {
        get: /**
         * @return {?}
         */
        function () {
            return this._lensStyle;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._lensStyle = val;
            if (this.notFirstTime) {
                this.imageZoom();
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} event
     * @return {?}
     */
    NgxImgZoomComponent.prototype.onscroll = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.hide = true;
        this.renderer.setStyle(this.lens, 'visibility', 'hidden');
    };
    /**
     * @param {?} event
     * @return {?}
     */
    NgxImgZoomComponent.prototype.onclick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.hide = true;
        this.renderer.setStyle(this.lens, 'visibility', 'hidden');
    };
    Object.defineProperty(NgxImgZoomComponent.prototype, "_imgSrc", {
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this.zoomImage = val;
            if (this.notFirstTime === true) {
                this.renderer.setStyle(this.result, 'backgroundImage', "url('" + val + "')");
            }
            this.notFirstTime = true;
            // this.renderer.setStyle(this.result, 'backgroundImage', val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgxImgZoomComponent.prototype, "_zoomImage", {
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            var _this = this;
            this.previewImage = val;
            this.showResult = false;
            /** @type {?} */
            var image = new Image();
            image.src = this.zoomImage;
            image.onload = (/**
             * @return {?}
             */
            function () {
                _this.showResult = true;
            });
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NgxImgZoomComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    NgxImgZoomComponent.prototype.handleZoomOutOnMouseWheelUp = /**
     * @return {?}
     */
    function () {
        if (this.enableZoom) {
            if (this.zoomBreakPoints.length - 1 > this.zoomIndex) {
                this.zoomIndex++;
            }
            this.lensStyle = "height: " + this.zoomBreakPoints[this.zoomIndex].h + "px; width: " + this.zoomBreakPoints[this.zoomIndex].w + "px;";
            this.imageZoom();
            this.moveLens(this.lastEventBeforeTheWheel); // Called to keep the position of the lens unchanged.
        }
    };
    /**
     * @return {?}
     */
    NgxImgZoomComponent.prototype.handleZoomInOnMouseWheelUp = /**
     * @return {?}
     */
    function () {
        if (this.enableZoom) {
            if (this.zoomIndex > 0) {
                this.zoomIndex--;
            }
            this.lensStyle = "height: " + this.zoomBreakPoints[this.zoomIndex].h + "px; width: " + this.zoomBreakPoints[this.zoomIndex].w + "px;";
            this.imageZoom();
            this.moveLens(this.lastEventBeforeTheWheel); // Called to keep the position of the lens unchanged.
        }
    };
    /**
     * @return {?}
     */
    NgxImgZoomComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.img = this.imgElmRef.nativeElement;
        this.result = this.resultElmRef.nativeElement;
        this.container = this.containerElmRef.nativeElement;
        this.renderer.setAttribute(this.img, 'style', (/** @type {?} */ (this.imgStyle)));
        this.renderer.setAttribute(this.result, 'style', (/** @type {?} */ (this.resultStyle)));
        this.renderer.setAttribute(this.container, 'style', (/** @type {?} */ (this.containerStyle)));
        this.imageZoom();
        /*execute a function when someone moves the cursor over the image, or the lens:*/
        this.lensMouseMoveListener = this.renderer.listen(this.lens, 'mousemove', this.moveLens.bind(this));
        this.imgMouseMoveListener = this.renderer.listen(this.img, 'mousemove', this.moveLens.bind(this));
        /*and also for touch screens:*/
        this.imgTouchMoveListener = this.renderer.listen(this.img, 'touchmove', this.moveLens.bind(this));
        this.lensTouchMoveListener = this.renderer.listen(this.lens, 'touchmove', this.moveLens.bind(this));
        this.renderer.setStyle(this.lens, 'visibility', 'hidden');
    };
    /**
     * @return {?}
     */
    NgxImgZoomComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.lensMouseMoveListener && this.lensMouseMoveListener();
        this.imgMouseMoveListener && this.imgMouseMoveListener();
        this.imgTouchMoveListener && this.imgTouchMoveListener();
        this.lensTouchMoveListener && this.lensTouchMoveListener();
    };
    /**
     * @return {?}
     */
    NgxImgZoomComponent.prototype.imageZoom = /**
     * @return {?}
     */
    function () {
        /*create lens:*/
        if (!this.lens) {
            this.lens = this.renderer.createElement('DIV');
            this.renderer.addClass(this.lens, 'img-zoom-lens');
            // this.renderer.addClass(this.lens, 'cursor-crosshair');
            this.renderer.insertBefore(this.img.parentElement, this.lens, this.img);
        }
        /*insert lens:*/
        this.renderer.setAttribute(this.lens, 'style', (/** @type {?} */ (this.lensStyle)));
        /*calculate the ratio between result DIV and lens:*/
        this.cx = this.result.offsetWidth / this.lens.offsetWidth;
        this.cy = this.result.offsetHeight / this.lens.offsetHeight;
        /*set background properties for the result DIV:*/
        this.renderer.setStyle(this.result, 'backgroundImage', "url('" + this.zoomImage + "')");
        this.renderer.setStyle(this.result, 'backgroundSize', (this.img.width * this.cx) + 'px ' + (this.img.height * this.cy) + 'px');
        // this.renderer.setStyle(this.img.parentElement, 'position', 'relative')
    };
    /**
     * @param {?} e
     * @return {?}
     */
    NgxImgZoomComponent.prototype.moveLens = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.lastEventBeforeTheWheel = e;
        /** @type {?} */
        var pos;
        /** @type {?} */
        var x;
        /** @type {?} */
        var y;
        /*prevent any other actions that may occur when moving over the image:*/
        e.preventDefault();
        /*get the cursor's x and y positions:*/
        pos = this.getCursorPos(e);
        /*calculate the position of the lens:*/
        x = pos.x - (this.lens.offsetWidth / 2);
        y = pos.y - (this.lens.offsetHeight / 2);
        /*prevent the lens from being positioned outside the image:*/
        if (x > this.img.width - this.lens.offsetWidth) {
            x = this.img.width - this.lens.offsetWidth;
        }
        else if (x < 0) {
            x = 0;
        }
        if (y > this.img.height - this.lens.offsetHeight) {
            y = this.img.height - this.lens.offsetHeight;
        }
        else if (y < 0) {
            y = 0;
        }
        this.hide = false;
        if (this.showResult) {
            this.renderer.setStyle(this.lens, 'left', x + 'px');
            this.renderer.setStyle(this.lens, 'top', y + 'px');
            /*display what the lens 'sees':*/
            this.renderer.setStyle(this.result, 'backgroundPosition', '-' + (x * this.cx) + 'px -' + (y * this.cy) + 'px');
            this.renderer.setStyle(this.lens, 'visibility', 'visible');
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    NgxImgZoomComponent.prototype.getCursorPos = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        /** @type {?} */
        var a;
        /** @type {?} */
        var x = 0;
        /** @type {?} */
        var y = 0;
        e = e || window.event;
        /*get the x and y positions of the image:*/
        a = this.img.getBoundingClientRect();
        /*calculate the cursor's x and y coordinates, relative to the image:*/
        x = e.pageX - a.left;
        y = e.pageY - a.top;
        /*consider any page scrolling:*/
        x = x - window.pageXOffset;
        y = y - window.pageYOffset;
        return { x: x, y: y };
    };
    /**
     * @return {?}
     */
    NgxImgZoomComponent.prototype.handleMouseLeave = /**
     * @return {?}
     */
    function () {
        this.hide = true;
        this.renderer.setStyle(this.lens, 'visibility', 'hidden');
    };
    /** @nocollapse */
    NgxImgZoomComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: NgxImgZoomService }
    ]; };
    NgxImgZoomComponent.propDecorators = {
        imgElmRef: [{ type: ViewChild, args: ['img', { static: false },] }],
        resultElmRef: [{ type: ViewChild, args: ['result', { static: false },] }],
        containerElmRef: [{ type: ViewChild, args: ['container', { static: false },] }],
        enableZoom: [{ type: Input }],
        imgStyle: [{ type: Input }],
        resultStyle: [{ type: Input }],
        lensStyle: [{ type: Input }],
        containerStyle: [{ type: Input }],
        onscroll: [{ type: HostListener, args: ['window:scroll', ['$event'],] }],
        onclick: [{ type: HostListener, args: ['window:click', ['$event.target'],] }],
        _imgSrc: [{ type: Input, args: ['zoomImageSrc',] }],
        _zoomImage: [{ type: Input, args: ['previewImageSrc',] }]
    };
NgxImgZoomComponent.ɵfac = function NgxImgZoomComponent_Factory(t) { return new (t || NgxImgZoomComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NgxImgZoomService)); };
NgxImgZoomComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NgxImgZoomComponent, selectors: [["ngx-img-zoom"]], viewQuery: function NgxImgZoomComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
        ɵngcc0.ɵɵviewQuery(_c1, true);
        ɵngcc0.ɵɵviewQuery(_c2, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.imgElmRef = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.resultElmRef = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.containerElmRef = _t.first);
    } }, hostBindings: function NgxImgZoomComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("scroll", function NgxImgZoomComponent_scroll_HostBindingHandler($event) { return ctx.onscroll($event); }, false, ɵngcc0.ɵɵresolveWindow)("click", function NgxImgZoomComponent_click_HostBindingHandler($event) { return ctx.onclick($event.target); }, false, ɵngcc0.ɵɵresolveWindow);
    } }, inputs: { enableZoom: "enableZoom", imgStyle: "imgStyle", resultStyle: "resultStyle", lensStyle: "lensStyle", _imgSrc: ["zoomImageSrc", "_imgSrc"], _zoomImage: ["previewImageSrc", "_zoomImage"], containerStyle: "containerStyle" }, decls: 6, vars: 4, consts: [[1, "img-zoom-container"], ["container", ""], ["id", "myimage", "libMouseWheel", "", 1, "cursor-crosshair", 3, "src", "mouseleave", "mouseWheelUp", "mouseWheelDown"], ["img", ""], ["id", "myresult", 1, "img-zoom-result", 3, "ngClass"], ["result", ""]], template: function NgxImgZoomComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0, 1);
        ɵngcc0.ɵɵelementStart(2, "img", 2, 3);
        ɵngcc0.ɵɵlistener("mouseleave", function NgxImgZoomComponent_Template_img_mouseleave_2_listener() { return ctx.handleMouseLeave(); })("mouseWheelUp", function NgxImgZoomComponent_Template_img_mouseWheelUp_2_listener() { return ctx.handleZoomInOnMouseWheelUp(); })("mouseWheelDown", function NgxImgZoomComponent_Template_img_mouseWheelDown_2_listener() { return ctx.handleZoomOutOnMouseWheelUp(); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelement(4, "div", 4, 5);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("src", ctx.previewImage, ɵngcc0.ɵɵsanitizeUrl);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(2, _c3, ctx.hide || !ctx.showResult));
    } }, directives: [ɵngcc2.MouseWheelDirective, ɵngcc3.NgClass], styles: ["*[_ngcontent-%COMP%]{box-sizing:border-box}.img-zoom-container[_ngcontent-%COMP%]{position:absolute}.cursor-crosshair[_ngcontent-%COMP%]{cursor:crosshair}.img-zoom-lens[_ngcontent-%COMP%]{pointer-events:none;position:absolute;border:1px solid #d4d4d4;width:40px;height:40px}.img-zoom-result[_ngcontent-%COMP%]{border:1px solid #d4d4d4;width:300px;height:300px}.hide[_ngcontent-%COMP%]{visibility:hidden}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxImgZoomComponent, [{
        type: Component,
        args: [{
                selector: 'ngx-img-zoom',
                template: "\n<div  class=\"img-zoom-container\" #container>\n    <img id=\"myimage\" class='cursor-crosshair' [src]=\"previewImage\" #img (mouseleave)=\"handleMouseLeave()\" \n\tlibMouseWheel (mouseWheelUp)=\"handleZoomInOnMouseWheelUp()\" (mouseWheelDown)=\"handleZoomOutOnMouseWheelUp()\">\n\n    <div [ngClass]=\"{'hide': hide || !showResult}\" \n        id=\"myresult\" \n        class=\"img-zoom-result\" \n        #result>\n    </div>\n</div>  ",
                styles: ["*{box-sizing:border-box}.img-zoom-container{position:absolute}.cursor-crosshair{cursor:crosshair}.img-zoom-lens{pointer-events:none;position:absolute;border:1px solid #d4d4d4;width:40px;height:40px}.img-zoom-result{border:1px solid #d4d4d4;width:300px;height:300px}.hide{visibility:hidden}"]
            }]
    }], function () { return [{ type: ɵngcc0.Renderer2 }, { type: ɵngcc1.NgxImgZoomService }]; }, { enableZoom: [{
            type: Input
        }], imgStyle: [{
            type: Input
        }], resultStyle: [{
            type: Input
        }], lensStyle: [{
            type: Input
        }], onscroll: [{
            type: HostListener,
            args: ['window:scroll', ['$event']]
        }], onclick: [{
            type: HostListener,
            args: ['window:click', ['$event.target']]
        }], _imgSrc: [{
            type: Input,
            args: ['zoomImageSrc']
        }], _zoomImage: [{
            type: Input,
            args: ['previewImageSrc']
        }], imgElmRef: [{
            type: ViewChild,
            args: ['img', { static: false }]
        }], resultElmRef: [{
            type: ViewChild,
            args: ['result', { static: false }]
        }], containerElmRef: [{
            type: ViewChild,
            args: ['container', { static: false }]
        }], containerStyle: [{
            type: Input
        }] }); })();
    return NgxImgZoomComponent;
}());
export { NgxImgZoomComponent };
if (false) {
    /** @type {?} */
    NgxImgZoomComponent.prototype.img;
    /** @type {?} */
    NgxImgZoomComponent.prototype.lens;
    /** @type {?} */
    NgxImgZoomComponent.prototype.result;
    /** @type {?} */
    NgxImgZoomComponent.prototype.cx;
    /** @type {?} */
    NgxImgZoomComponent.prototype.cy;
    /** @type {?} */
    NgxImgZoomComponent.prototype.container;
    /** @type {?} */
    NgxImgZoomComponent.prototype.hide;
    /** @type {?} */
    NgxImgZoomComponent.prototype._triggerAnimationIn;
    /** @type {?} */
    NgxImgZoomComponent.prototype.notFirstTime;
    /** @type {?} */
    NgxImgZoomComponent.prototype.showResult;
    /** @type {?} */
    NgxImgZoomComponent.prototype.lastEventBeforeTheWheel;
    /** @type {?} */
    NgxImgZoomComponent.prototype.zoomBreakPoints;
    /** @type {?} */
    NgxImgZoomComponent.prototype.zoomIndex;
    /** @type {?} */
    NgxImgZoomComponent.prototype.lensMouseMoveListener;
    /** @type {?} */
    NgxImgZoomComponent.prototype.imgMouseMoveListener;
    /** @type {?} */
    NgxImgZoomComponent.prototype.imgTouchMoveListener;
    /** @type {?} */
    NgxImgZoomComponent.prototype.lensTouchMoveListener;
    /** @type {?} */
    NgxImgZoomComponent.prototype.zoomMode;
    /** @type {?} */
    NgxImgZoomComponent.prototype.imgElmRef;
    /** @type {?} */
    NgxImgZoomComponent.prototype.resultElmRef;
    /** @type {?} */
    NgxImgZoomComponent.prototype.containerElmRef;
    /** @type {?} */
    NgxImgZoomComponent.prototype.enableZoom;
    /** @type {?} */
    NgxImgZoomComponent.prototype._imgStyle;
    /** @type {?} */
    NgxImgZoomComponent.prototype._resultStyle;
    /** @type {?} */
    NgxImgZoomComponent.prototype._lensStyle;
    /** @type {?} */
    NgxImgZoomComponent.prototype.containerStyle;
    /** @type {?} */
    NgxImgZoomComponent.prototype.zoomImage;
    /** @type {?} */
    NgxImgZoomComponent.prototype.previewImage;
    /**
     * @type {?}
     * @private
     */
    NgxImgZoomComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    NgxImgZoomComponent.prototype.ngxZoomService;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWltZy16b29tLmNvbXBvbmVudC5qcyIsInNvdXJjZXMiOlsibmd4LWltZy16b29tL2xpYi9uZ3gtaW1nLXpvb20uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFpQixLQUFLLEVBQUUsWUFBWSxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBQ25JLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDOzs7Ozs7Ozs7O0FBRTNEO0FBRWMsSUFtQlosNkJBQ1UsUUFBbUIsRUFDbkIsY0FBaUM7QUFDMUMsUUFGUyxhQUFRLEdBQVIsUUFBUSxDQUFXO0FBQUMsUUFDcEIsbUJBQWMsR0FBZCxjQUFjLENBQW1CO0FBQzdDLFFBaEJFLFNBQUksR0FBRyxJQUFJLENBQUM7QUFDZCxRQUFFLHdCQUFtQixHQUFHLEtBQUssQ0FBQztBQUM5QixRQUFFLGlCQUFZLEdBQUcsS0FBSyxDQUFDO0FBQ3ZCLFFBQUUsZUFBVSxHQUFHLEtBQUssQ0FBQztBQUNyQixRQUVFLGNBQVMsR0FBRyxDQUFDLENBQUM7QUFDaEIsUUFhSSxhQUFRLEdBQW1CLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDO0FBQzVELFFBS2EsZUFBVSxHQUFHLEtBQUssQ0FBQztBQUNoQyxRQVZNLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUM7QUFDakUsSUFBSSxDQUFDO0FBQ0wsSUFTSSxzQkFBYSx5Q0FBUTtBQUFJO0FBQ2hCO0FBRVg7QUFBWSxRQUFWO0FBQWMsWUFDWixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7QUFDNUIsUUFBSSxDQUFDO0FBRUw7QUFBaUI7QUFDUTtBQUNiO0FBQVksUUFUcEIsVUFBc0IsR0FBRztBQUM3QixZQUFNLElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDO0FBQzNCLFFBQUksQ0FBQztB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LElBQW5CLG1EQUFxQjtBQUN2QjtBQUFxQixJQUFuQixvREFBc0I7QUFDeEI7QUFFRyxJQU1DLHVDQUF3RDtBQUM1RDtBQUFxQixJQUFqQix3Q0FBMkQ7QUFDL0Q7QUFBcUIsSUFBakIsMkNBQWlFO0FBQ3JFO0FBQXFCLElBQWpCLDhDQUF1RTtBQUMzRTtBQUVtQixJQUFmLHlDQUE0QjtBQUNoQztBQUNNLElBREYsd0NBQVU7QUFDZDtBQUFxQixJQU9qQiwyQ0FBYTtBQUNqQjtBQUFxQixJQU9qQix5Q0FBVztBQUNmO0FBQXFCLElBU2pCLDZDQUF3QjtBQUM1QjtBQUNNLElBREYsd0NBQVU7QUFDZDtBQUVFLElBRkUsMkNBQWE7QUFDakI7QUFDTztBQUFpQjtBQUFnQjtBQUFRLElBM0M1Qyx1Q0FBMkI7QUFBQztBQUN6QjtBQUFpQjtBQUFnQjtBQUN0QyxJQURFLDZDQUF5QztBQUM3QztBQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIFJlbmRlcmVyMiwgRWxlbWVudFJlZiwgVmlld0NoaWxkLCBBZnRlclZpZXdJbml0LCBJbnB1dCwgSG9zdExpc3RlbmVyLCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE5neEltZ1pvb21TZXJ2aWNlIH0gZnJvbSAnLi9uZ3gtaW1nLXpvb20uc2VydmljZSc7XG5pbXBvcnQgeyBOZ3hJbWdab29tTW9kZSB9IGZyb20gJy4vbW9kZS5lbnVtJztcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25neC1pbWctem9vbScsXG4gIHRlbXBsYXRlVXJsOiAnLi9uZ3gtaW1nLXpvb20uY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9uZ3gtaW1nLXpvb20uY29tcG9uZW50LmNzcyddLFxufSlcbmV4cG9ydCBjbGFzcyBOZ3hJbWdab29tQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xuXG4gIGltZzsgbGVuczsgcmVzdWx0OyBjeDsgY3k7IGNvbnRhaW5lcjtcbiAgaGlkZSA9IHRydWU7XG4gIF90cmlnZ2VyQW5pbWF0aW9uSW4gPSBmYWxzZTtcbiAgbm90Rmlyc3RUaW1lID0gZmFsc2U7XG4gIHNob3dSZXN1bHQgPSBmYWxzZTtcbiAgbGFzdEV2ZW50QmVmb3JlVGhlV2hlZWw7XG4gIHpvb21CcmVha1BvaW50cztcbiAgem9vbUluZGV4ID0gMDtcblxuICBsZW5zTW91c2VNb3ZlTGlzdGVuZXI7XG4gIGltZ01vdXNlTW92ZUxpc3RlbmVyO1xuICBpbWdUb3VjaE1vdmVMaXN0ZW5lcjtcbiAgbGVuc1RvdWNoTW92ZUxpc3RlbmVyO1xuICBcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxuICAgIHByaXZhdGUgbmd4Wm9vbVNlcnZpY2U6IE5neEltZ1pvb21TZXJ2aWNlXG4gICAgKSB7XG4gICAgICB0aGlzLnpvb21CcmVha1BvaW50cyA9IHRoaXMubmd4Wm9vbVNlcnZpY2Uuem9vbUJyZWFrUG9pbnRzO1xuICAgIH1cblxuICAgIHpvb21Nb2RlOiBOZ3hJbWdab29tTW9kZSA9IHRoaXMubmd4Wm9vbVNlcnZpY2Uuem9vbU1vZGU7XG4gICAgQFZpZXdDaGlsZCgnaW1nJywgeyBzdGF0aWM6IGZhbHNlIH0pIGltZ0VsbVJlZjogRWxlbWVudFJlZjtcbiAgICBAVmlld0NoaWxkKCdyZXN1bHQnLCB7IHN0YXRpYzogZmFsc2UgfSkgcmVzdWx0RWxtUmVmOiBFbGVtZW50UmVmO1xuICAgIEBWaWV3Q2hpbGQoJ2NvbnRhaW5lcicsIHsgc3RhdGljOiBmYWxzZSB9KSBjb250YWluZXJFbG1SZWY6IEVsZW1lbnRSZWY7XG5cblxuICAgIEBJbnB1dCgpIGVuYWJsZVpvb20gPSBmYWxzZTtcbiAgICBfaW1nU3R5bGU7XG4gICAgQElucHV0KCkgc2V0IGltZ1N0eWxlKHZhbCkge1xuICAgICAgdGhpcy5faW1nU3R5bGUgPSB2YWw7XG4gICAgfVxuICAgIGdldCBpbWdTdHlsZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pbWdTdHlsZTtcbiAgICB9XG5cbiAgICBfcmVzdWx0U3R5bGU7XG4gICAgQElucHV0KCkgc2V0IHJlc3VsdFN0eWxlKHZhbCkge1xuICAgICAgdGhpcy5fcmVzdWx0U3R5bGUgPSB2YWw7XG4gICAgfVxuICAgIGdldCByZXN1bHRTdHlsZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRTdHlsZTtcbiAgICB9XG5cbiAgICBfbGVuc1N0eWxlO1xuICAgIEBJbnB1dCgpIHNldCBsZW5zU3R5bGUodmFsKSB7XG4gICAgICB0aGlzLl9sZW5zU3R5bGUgPSB2YWw7XG4gICAgICBpZiAodGhpcy5ub3RGaXJzdFRpbWUpIHtcbiAgICAgICAgdGhpcy5pbWFnZVpvb20oKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGxlbnNTdHlsZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9sZW5zU3R5bGU7XG4gICAgfVxuICAgIEBJbnB1dCgpIGNvbnRhaW5lclN0eWxlO1xuICAgIHpvb21JbWFnZTtcbiAgICBwcmV2aWV3SW1hZ2U7XG5cbiAgQEhvc3RMaXN0ZW5lcignd2luZG93OnNjcm9sbCcsIFsnJGV2ZW50J10pIG9uc2Nyb2xsKGV2ZW50KSB7XG4gICAgdGhpcy5oaWRlID0gdHJ1ZTtcbiAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMubGVucywgJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gIH1cbiAgQEhvc3RMaXN0ZW5lcignd2luZG93OmNsaWNrJywgWyckZXZlbnQudGFyZ2V0J10pIG9uY2xpY2soZXZlbnQpIHtcbiAgICB0aGlzLmhpZGUgPSB0cnVlO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5sZW5zLCAndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgfVxuXG4gIEBJbnB1dCgnem9vbUltYWdlU3JjJykgc2V0IF9pbWdTcmModmFsKSB7XG4gICAgdGhpcy56b29tSW1hZ2UgPSB2YWw7XG4gICAgaWYgKHRoaXMubm90Rmlyc3RUaW1lID09PSB0cnVlKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMucmVzdWx0LCAnYmFja2dyb3VuZEltYWdlJywgXCJ1cmwoJ1wiICsgdmFsICsgXCInKVwiKTtcbiAgICB9XG4gICAgdGhpcy5ub3RGaXJzdFRpbWUgPSB0cnVlO1xuICAgIC8vIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5yZXN1bHQsICdiYWNrZ3JvdW5kSW1hZ2UnLCB2YWwpO1xuICB9XG5cbiAgQElucHV0KCdwcmV2aWV3SW1hZ2VTcmMnKSBzZXQgX3pvb21JbWFnZSh2YWwpIHtcbiAgICB0aGlzLnByZXZpZXdJbWFnZSA9IHZhbDtcbiAgICB0aGlzLnNob3dSZXN1bHQgPSBmYWxzZTtcbiAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIGltYWdlLnNyYyA9IHRoaXMuem9vbUltYWdlO1xuICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIHRoaXMuc2hvd1Jlc3VsdCA9IHRydWU7XG4gICAgfTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICB9XG5cbiAgaGFuZGxlWm9vbU91dE9uTW91c2VXaGVlbFVwKCkge1xuICAgIGlmICh0aGlzLmVuYWJsZVpvb20pIHtcbiAgICAgIGlmICh0aGlzLnpvb21CcmVha1BvaW50cy5sZW5ndGggLSAxID4gdGhpcy56b29tSW5kZXgpIHtcbiAgICAgICAgdGhpcy56b29tSW5kZXgrKztcbiAgICAgIH1cbiAgICAgIHRoaXMubGVuc1N0eWxlID0gYGhlaWdodDogJHt0aGlzLnpvb21CcmVha1BvaW50c1t0aGlzLnpvb21JbmRleF0uaH1weDsgd2lkdGg6ICR7dGhpcy56b29tQnJlYWtQb2ludHNbdGhpcy56b29tSW5kZXhdLnd9cHg7YDtcbiAgICAgIHRoaXMuaW1hZ2Vab29tKCk7XG4gICAgICB0aGlzLm1vdmVMZW5zKHRoaXMubGFzdEV2ZW50QmVmb3JlVGhlV2hlZWwpOyAvLyBDYWxsZWQgdG8ga2VlcCB0aGUgcG9zaXRpb24gb2YgdGhlIGxlbnMgdW5jaGFuZ2VkLlxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVpvb21Jbk9uTW91c2VXaGVlbFVwKCkge1xuICAgIGlmICh0aGlzLmVuYWJsZVpvb20pIHtcbiAgICAgIGlmICh0aGlzLnpvb21JbmRleCA+IDApIHtcbiAgICAgICAgdGhpcy56b29tSW5kZXgtLTtcbiAgICAgIH1cbiAgICAgIHRoaXMubGVuc1N0eWxlID0gYGhlaWdodDogJHt0aGlzLnpvb21CcmVha1BvaW50c1t0aGlzLnpvb21JbmRleF0uaH1weDsgd2lkdGg6ICR7dGhpcy56b29tQnJlYWtQb2ludHNbdGhpcy56b29tSW5kZXhdLnd9cHg7YDtcbiAgICAgIHRoaXMuaW1hZ2Vab29tKCk7XG4gICAgICB0aGlzLm1vdmVMZW5zKHRoaXMubGFzdEV2ZW50QmVmb3JlVGhlV2hlZWwpOyAvLyBDYWxsZWQgdG8ga2VlcCB0aGUgcG9zaXRpb24gb2YgdGhlIGxlbnMgdW5jaGFuZ2VkLlxuICAgIH1cbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICB0aGlzLmltZyA9IHRoaXMuaW1nRWxtUmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgdGhpcy5yZXN1bHQgPSB0aGlzLnJlc3VsdEVsbVJlZi5uYXRpdmVFbGVtZW50O1xuICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbG1SZWYubmF0aXZlRWxlbWVudDtcblxuICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMuaW1nLCAnc3R5bGUnLCA8c3RyaW5nPnRoaXMuaW1nU3R5bGUpO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMucmVzdWx0LCAnc3R5bGUnLCA8c3RyaW5nPnRoaXMucmVzdWx0U3R5bGUpO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMuY29udGFpbmVyLCAnc3R5bGUnLCA8c3RyaW5nPnRoaXMuY29udGFpbmVyU3R5bGUpO1xuICAgIHRoaXMuaW1hZ2Vab29tKCk7XG4gICAgXG4gICAgLypleGVjdXRlIGEgZnVuY3Rpb24gd2hlbiBzb21lb25lIG1vdmVzIHRoZSBjdXJzb3Igb3ZlciB0aGUgaW1hZ2UsIG9yIHRoZSBsZW5zOiovXG4gICAgdGhpcy5sZW5zTW91c2VNb3ZlTGlzdGVuZXIgPSB0aGlzLnJlbmRlcmVyLmxpc3Rlbih0aGlzLmxlbnMsICdtb3VzZW1vdmUnLCB0aGlzLm1vdmVMZW5zLmJpbmQodGhpcykpO1xuICAgIHRoaXMuaW1nTW91c2VNb3ZlTGlzdGVuZXIgPSB0aGlzLnJlbmRlcmVyLmxpc3Rlbih0aGlzLmltZywgJ21vdXNlbW92ZScsIHRoaXMubW92ZUxlbnMuYmluZCh0aGlzKSk7XG5cbiAgICAvKmFuZCBhbHNvIGZvciB0b3VjaCBzY3JlZW5zOiovXG4gICAgdGhpcy5pbWdUb3VjaE1vdmVMaXN0ZW5lciA9IHRoaXMucmVuZGVyZXIubGlzdGVuKHRoaXMuaW1nLCAndG91Y2htb3ZlJywgdGhpcy5tb3ZlTGVucy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmxlbnNUb3VjaE1vdmVMaXN0ZW5lciA9IHRoaXMucmVuZGVyZXIubGlzdGVuKHRoaXMubGVucywgJ3RvdWNobW92ZScsIHRoaXMubW92ZUxlbnMuYmluZCh0aGlzKSk7XG5cbiAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMubGVucywgJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XHRcbiAgfVxuXG4gIG5nT25EZXN0cm95KCl7XG4gICAgdGhpcy5sZW5zTW91c2VNb3ZlTGlzdGVuZXIgJiYgdGhpcy5sZW5zTW91c2VNb3ZlTGlzdGVuZXIoKTtcbiAgICB0aGlzLmltZ01vdXNlTW92ZUxpc3RlbmVyICYmIHRoaXMuaW1nTW91c2VNb3ZlTGlzdGVuZXIoKTtcbiAgICB0aGlzLmltZ1RvdWNoTW92ZUxpc3RlbmVyICYmIHRoaXMuaW1nVG91Y2hNb3ZlTGlzdGVuZXIoKTtcbiAgICB0aGlzLmxlbnNUb3VjaE1vdmVMaXN0ZW5lciAmJiB0aGlzLmxlbnNUb3VjaE1vdmVMaXN0ZW5lcigpO1xuICB9XG5cbiAgaW1hZ2Vab29tKCkge1xuICAgIC8qY3JlYXRlIGxlbnM6Ki9cbiAgICBpZiAoIXRoaXMubGVucykge1xuICAgICAgdGhpcy5sZW5zID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5sZW5zLCAnaW1nLXpvb20tbGVucycpO1xuICAgICAgLy8gdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmxlbnMsICdjdXJzb3ItY3Jvc3NoYWlyJyk7XG4gICAgICB0aGlzLnJlbmRlcmVyLmluc2VydEJlZm9yZSh0aGlzLmltZy5wYXJlbnRFbGVtZW50LCB0aGlzLmxlbnMsIHRoaXMuaW1nKTtcbiAgICB9XG5cbiAgICAvKmluc2VydCBsZW5zOiovXG4gICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUodGhpcy5sZW5zLCAnc3R5bGUnLCA8c3RyaW5nPnRoaXMubGVuc1N0eWxlKTtcblxuICAgIC8qY2FsY3VsYXRlIHRoZSByYXRpbyBiZXR3ZWVuIHJlc3VsdCBESVYgYW5kIGxlbnM6Ki9cbiAgICAgIHRoaXMuY3ggPSB0aGlzLnJlc3VsdC5vZmZzZXRXaWR0aCAvIHRoaXMubGVucy5vZmZzZXRXaWR0aDtcbiAgICAgIHRoaXMuY3kgPSB0aGlzLnJlc3VsdC5vZmZzZXRIZWlnaHQgLyB0aGlzLmxlbnMub2Zmc2V0SGVpZ2h0O1xuXG4gICAgLypzZXQgYmFja2dyb3VuZCBwcm9wZXJ0aWVzIGZvciB0aGUgcmVzdWx0IERJVjoqL1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5yZXN1bHQsICdiYWNrZ3JvdW5kSW1hZ2UnLCBcInVybCgnXCIgKyB0aGlzLnpvb21JbWFnZSArIFwiJylcIik7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnJlc3VsdCwgJ2JhY2tncm91bmRTaXplJywgKHRoaXMuaW1nLndpZHRoICogdGhpcy5jeCkgKyAncHggJyArICh0aGlzLmltZy5oZWlnaHQgKiB0aGlzLmN5KSArICdweCcpO1xuICAgIC8vIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5pbWcucGFyZW50RWxlbWVudCwgJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJylcblxuICAgIFxuICB9XG5cbiAgbW92ZUxlbnMoZSkge1xuICAgIHRoaXMubGFzdEV2ZW50QmVmb3JlVGhlV2hlZWwgPSBlO1xuICAgICAgbGV0IHBvcywgeCwgeTtcbiAgICAgIC8qcHJldmVudCBhbnkgb3RoZXIgYWN0aW9ucyB0aGF0IG1heSBvY2N1ciB3aGVuIG1vdmluZyBvdmVyIHRoZSBpbWFnZToqL1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLypnZXQgdGhlIGN1cnNvcidzIHggYW5kIHkgcG9zaXRpb25zOiovXG4gICAgICBwb3MgPSB0aGlzLmdldEN1cnNvclBvcyhlKTtcbiAgICAgIC8qY2FsY3VsYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGVuczoqL1xuICAgICAgeCA9IHBvcy54IC0gKHRoaXMubGVucy5vZmZzZXRXaWR0aCAvIDIpO1xuICAgICAgeSA9IHBvcy55IC0gKHRoaXMubGVucy5vZmZzZXRIZWlnaHQgLyAyKTtcblxuXG4gICAgICAvKnByZXZlbnQgdGhlIGxlbnMgZnJvbSBiZWluZyBwb3NpdGlvbmVkIG91dHNpZGUgdGhlIGltYWdlOiovXG4gICAgICBpZiAoeCA+IHRoaXMuaW1nLndpZHRoIC0gdGhpcy5sZW5zLm9mZnNldFdpZHRoKSB7XG4gICAgICAgIHggPSB0aGlzLmltZy53aWR0aCAtIHRoaXMubGVucy5vZmZzZXRXaWR0aDtcbiAgICAgIH0gZWxzZSBpZiAoeCA8IDApIHtcbiAgICAgICAgeCA9IDA7XG4gICAgICB9IFxuICAgICAgIGlmICh5ID4gdGhpcy5pbWcuaGVpZ2h0IC0gdGhpcy5sZW5zLm9mZnNldEhlaWdodCkge1xuICAgICAgICB5ID0gdGhpcy5pbWcuaGVpZ2h0IC0gdGhpcy5sZW5zLm9mZnNldEhlaWdodDtcbiAgICAgIH0gZWxzZSBpZiAoeSA8IDAgKSB7XG4gICAgICAgIHkgPSAwO1xuICAgICAgfSBcbiAgICAgIHRoaXMuaGlkZSA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMuc2hvd1Jlc3VsdCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMubGVucywgJ2xlZnQnLCB4ICsgJ3B4Jyk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5sZW5zLCAndG9wJywgeSArICdweCcpO1xuICAgICAgICAvKmRpc3BsYXkgd2hhdCB0aGUgbGVucyAnc2Vlcyc6Ki9cbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnJlc3VsdCwgJ2JhY2tncm91bmRQb3NpdGlvbicsICctJyArICh4ICogdGhpcy5jeCkgKyAncHggLScgKyAoeSAqIHRoaXMuY3kpICsgJ3B4Jyk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5sZW5zLCAndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XG4gICAgICB9XG4gICAgfVxuXG4gIGdldEN1cnNvclBvcyhlKSB7XG4gICAgICBsZXQgYSwgeCA9IDAsIHkgPSAwO1xuICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgICAgLypnZXQgdGhlIHggYW5kIHkgcG9zaXRpb25zIG9mIHRoZSBpbWFnZToqL1xuICAgICAgYSA9IHRoaXMuaW1nLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgLypjYWxjdWxhdGUgdGhlIGN1cnNvcidzIHggYW5kIHkgY29vcmRpbmF0ZXMsIHJlbGF0aXZlIHRvIHRoZSBpbWFnZToqL1xuICAgICAgeCA9IGUucGFnZVggLSBhLmxlZnQ7XG4gICAgICB5ID0gZS5wYWdlWSAtIGEudG9wO1xuICAgICAgLypjb25zaWRlciBhbnkgcGFnZSBzY3JvbGxpbmc6Ki9cbiAgICAgIHggPSB4IC0gd2luZG93LnBhZ2VYT2Zmc2V0O1xuICAgICAgeSA9IHkgLSB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgICByZXR1cm4ge3ggOiB4LCB5IDogeX07XG4gIH1cblxuICBoYW5kbGVNb3VzZUxlYXZlKCkge1xuICAgIHRoaXMuaGlkZSA9IHRydWU7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmxlbnMsICd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICB9XG5cbn1cbiJdfQ==